<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>商品详情 - 小兔鲜儿</title>
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="css/checkout.css">
    <script src="js/auth.js"></script>
    <link rel="stylesheet" href="css/product.css">
</head>

<body>
    <!-- 顶部导航栏 -->
    <div class="top-nav">
        <div class="container">
            <a href="index.html" class="top-link">返回首页</a>
            <span class="separator">|</span>
            <span id="user-status-display">
                <span id="product-user-status" class="user-status">
                    <a href="javascript:void(0)" id="product-login-link" class="user-link">登录</a>
                    <span class="separator">/</span>
                    <a href="javascript:void(0)" id="product-register-link" class="user-link">注册</a>
                </span>
                <span id="product-logged-in-user" class="logged-in-user" style="display: none;">
                    <span class="welcome-text">欢迎, <span id="product-username-display"></span></span>
                    <a href="javascript:void(0)" id="product-logout-link" class="logout-link">退出</a>
                </span>
            </span>
        </div>
    </div>

    <!-- 主导航 -->
    <header class="main-header">
        <div class="container">
            <a href="index.html"><img src="images/LOGO.PNG" class="logo" alt="小兔鲜儿"></a>
            <nav class="main-nav">
                <ul class="nav-list">
                    <li><a href="index.html" class="nav-link">首页</a></li>
                    <li><a href="index.html#fresh-section" class="nav-link">生鲜</a></li>
                    <li><a href="index.html#fresh-goods" class="nav-link">美食</a></li>
                    <li><a href="index.html#kitchen-section" class="nav-link">餐厨</a></li>
                    <li><a href="index.html#brand-section" class="nav-link">电器</a></li>
                    <li><a href="index.html#home-section" class="nav-link">家居</a></li>
                    <li><a href="index.html#popular-recommend" class="nav-link">洗护</a></li>
                    <li><a href="index.html#fresh-section" class="nav-link">母婴</a></li>
                    <li><a href="index.html#clothes-section" class="nav-link">服装</a></li>
                </ul>
            </nav>
            <div class="header-right">
                <div class="search-box">
                    <input type="text" class="search-bar" placeholder="搜一搜">
                </div>
                <div class="header-icons">
                    <a href="checkout.html" class="header-icon cart-link" id="cart-link" title="购物车">
                        🛒
                        <span class="cart-count" id="cart-count">0</span>
                    </a>
                    <a href="#" class="header-icon" id="user-icon" title="用户中心">
                        👤
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- 商品详情内容 -->
    <main class="product-detail container">
        <div class="product-breadcrumb">
            <a href="index.html">首页</a> &gt;
            <a href="index.html#fresh-goods">新鲜好物</a> &gt;
            <span id="product-category">KN95口罩</span>
        </div>

        <div class="product-main">
            <div class="product-gallery">
                <div class="main-image">
                    <img id="product-main-image" src="images/goods1.png" alt="商品主图">
                </div>
                <div class="thumbnail-list">
                    <div class="thumbnail active" data-image="images/goods1.png">
                        <img src="images/goods1.png" alt="商品缩略图1">
                    </div>
                </div>
            </div>

            <div class="product-info">
                <h1 id="product-title">KN95级莫兰迪色防护口罩</h1>
                <div class="product-price">
                    <span class="current-price" id="product-price">¥79.00</span>
                    <span class="original-price">¥99.00</span>
                    <span class="discount">8折</span>
                </div>

                <div class="product-specs">
                    <div class="spec-item">
                        <span class="spec-label">品牌：</span>
                        <span class="spec-value" id="product-brand">小兔鲜儿</span>
                    </div>
                    <div class="spec-item">
                        <span class="spec-label">库存：</span>
                        <span class="spec-value" id="product-stock">999件</span>
                    </div>
                    <div class="spec-item">
                        <span class="spec-label">销量：</span>
                        <span class="spec-value" id="product-sales">2000+件</span>
                    </div>
                </div>

                <div class="product-options">
                    <div class="option-item">
                        <span class="option-label">颜色：</span>
                        <div class="option-values">
                            <button class="option-value active" data-value="莫兰迪灰">莫兰迪灰</button>
                            <button class="option-value" data-value="莫兰迪蓝">莫兰迪蓝</button>
                            <button class="option-value" data-value="莫兰迪粉">莫兰迪粉</button>
                        </div>
                    </div>
                    <div class="option-item">
                        <span class="option-label">数量：</span>
                        <div class="quantity-selector">
                            <button class="quantity-btn minus">-</button>
                            <input type="number" id="quantity" value="1" min="1" max="99">
                            <button class="quantity-btn plus">+</button>
                        </div>
                        <span class="stock-info">库存 <span id="available-stock">999</span> 件</span>
                    </div>
                </div>

                <div class="product-actions">
                    <button class="btn-add-cart" id="add-to-cart">加入购物车</button>
                    <button class="btn-buy-now" id="buy-now">立即购买</button>
                    <button class="btn-favorite" id="add-favorite">❤ 收藏</button>
                </div>

                <div class="product-shipping">
                    <div class="shipping-info">
                        <span>✅ 满99元包邮</span>
                        <span>✅ 正品保证</span>
                        <span>✅ 7天无理由退货</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="product-tabs">
            <div class="tab-headers">
                <button class="tab-header active" data-tab="description">商品详情</button>
                <button class="tab-header" data-tab="specs">规格参数</button>
                <button class="tab-header" data-tab="reviews">用户评价 (258)</button>
                <button class="tab-header" data-tab="qa">常见问题</button>
            </div>

            <div class="tab-content active" id="description">
                <h3>商品描述</h3>
                <p>KN95级防护口罩，采用莫兰迪色系设计，时尚与防护兼备。</p>
                <p>【产品特点】</p>
                <ul>
                    <li>KN95级高效防护，过滤效率≥95%</li>
                    <li>莫兰迪色系设计，时尚美观</li>
                    <li>3D立体剪裁，贴合面部轮廓</li>
                    <li>可调节鼻梁条，密封性好</li>
                    <li>透气内层，佩戴舒适不闷热</li>
                </ul>
                <div class="product-images">
                    <img src="images/goods1_detail1.jpg" alt="产品细节1">
                    <img src="images/goods1_detail2.jpg" alt="产品细节2">
                </div>
            </div>

            <div class="tab-content" id="specs">
                <h3>规格参数</h3>
                <table class="specs-table">
                    <tr>
                        <td>产品名称</td>
                        <td>KN95防护口罩</td>
                    </tr>
                    <tr>
                        <td>防护等级</td>
                        <td>KN95</td>
                    </tr>
                    <tr>
                        <td>过滤效率</td>
                        <td>≥95%</td>
                    </tr>
                    <tr>
                        <td>呼吸阻力</td>
                        <td>≤210Pa</td>
                    </tr>
                    <tr>
                        <td>尺寸</td>
                        <td>175mm × 95mm</td>
                    </tr>
                    <tr>
                        <td>材质</td>
                        <td>无纺布、熔喷布、鼻梁条、耳带</td>
                    </tr>
                </table>
            </div>

            <div class="tab-content" id="reviews">
                <h3>用户评价</h3>
                <div class="review-summary">
                    <div class="rating-overview">
                        <div class="rating-score">4.8</div>
                        <div class="rating-stars">★★★★★</div>
                        <div class="rating-count">258条评价</div>
                    </div>
                </div>
                <!-- 评价列表 -->
            </div>

            <div class="tab-content" id="qa">
                <h3>常见问题</h3>
                <div class="faq-item">
                    <div class="faq-question">Q: 口罩可以水洗吗？</div>
                    <div class="faq-answer">A: 不可以，KN95口罩为一次性防护用品，水洗会破坏过滤层结构，降低防护效果。</div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">Q: 保质期是多久？</div>
                    <div class="faq-answer">A: 在干燥、通风、避光环境下，保质期为3年。</div>
                </div>
            </div>
        </div>
    </main>

    <!-- 底部版权信息（复用首页的底部） -->
    <div class="footer">
        <div class="wrapper">
            <!-- 复用首页的底部内容 -->
            <div class="copyright">
                <p>
                    <a href="#">关于我们</a> &nbsp|&nbsp
                    <a href="#">帮助中心</a> &nbsp|&nbsp
                    <a href="#">售后服务</a> &nbsp|&nbsp
                    <a href="#">配送与验收</a> &nbsp|&nbsp
                    <a href="#">商务合作</a> &nbsp|&nbsp
                    <a href="#">搜索推荐</a> &nbsp|&nbsp
                </p>
                <p><a href="#">@李文杰 © 25216950212</a></p>
            </div>
        </div>
    </div>

    <!-- 模态框（复用首页的） -->
    <div id="auth-modal" class="auth-modal" style="display: none;">
        <!-- 复用首页的登录/注册模态框内容 -->
    </div>

    <!-- 修改 product.html 的脚本部分 -->
    <!-- 移除重复的 script 标签，替换为以下内容： -->
    <script src="js/config.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/products-data.js"></script> <!-- 必须在 cart-manager.js 之前 -->
    <script src="js/cart-manager.js"></script>
    <script src="js/search-common.js"></script>
    <script src="js/product.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            console.log('商品详情页面初始化...');

            // 更新购物车数量
            if (typeof updateCartCount === 'function') {
                setTimeout(updateCartCount, 150);
            }

            // 更新用户状态
            if (typeof updateUserStatus === 'function') {
                setTimeout(updateUserStatus, 150);
            }

            // 初始化搜索功能
            if (typeof initCommonSearch === 'function') {
                setTimeout(initCommonSearch, 200);
            }

            console.log('商品详情页面初始化完成');
        });
    </script>
</body>

</html>